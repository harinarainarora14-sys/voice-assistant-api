<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Voice & Text Assistant</title>
<style>
/* Minimal styles for demo */
body { background:#0a0a0a; color:#fff; font-family:sans-serif; display:flex; flex-direction:column; height:100vh; margin:0; }
#chat-container { flex:1; overflow-y:auto; padding:10px; }
.bubble { margin:6px 0; padding:10px; border-radius:12px; max-width:80%; }
.user { background:#0077cc; color:#fff; margin-left:auto; text-align:right; }
.bot { background:#222; color:#fff; margin-right:auto; text-align:left; }
#input-bar { display:flex; gap:6px; padding:6px; background:#111; }
#input-bar input { flex:1; padding:8px; border-radius:6px; border:none; }
#input-bar button { padding:8px 12px; border:none; border-radius:6px; cursor:pointer; }
</style>
</head>
<body>

<div id="chat-container"></div>

<div id="input-bar">
  <input id="textInput" placeholder="Type message..." onkeydown="if(event.key==='Enter'){sendText();}">
  <button onclick="sendText()">Send</button>
  <button id="geminiBtn">Gemini: Off</button>
</div>

<script>
let apiBase = "http://127.0.0.1:8000"; // change if deployed
let useGemini = false;

document.getElementById("geminiBtn").onclick = () => {
    useGemini = !useGemini;
    document.getElementById("geminiBtn").innerText = useGemini ? "Gemini: On" : "Gemini: Off";
};

function addMessage(msg, sender){
    const container = document.getElementById("chat-container");
    const div = document.createElement("div");
    div.className = "bubble " + sender;
    div.textContent = msg;
    container.appendChild(div);
    container.scrollTop = container.scrollHeight;
}

async function sendText(){
    const input = document.getElementById("textInput");
    const text = input.value.trim();
    if(!text) return;
    addMessage(text, "user");
    input.value="";
    try{
        const res = await fetch(`${apiBase}/ask?question=${encodeURIComponent(text)}&use_gemini=${useGemini}`);
        const data = await res.json();
        addMessage(data.answer || "No answer from API", "bot");
    } catch(err){
        addMessage("Error connecting to API", "bot");
        console.error(err);
    }
}
</script>

</body>
</html>
